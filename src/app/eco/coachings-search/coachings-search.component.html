<!-- Header -->
<app-header></app-header>
<header class="header shop">
    <div class="middle-inner">
      <div class="container">
          <div class="search-bar-top">
            <form [formGroup]="serviceForm" (submit)="onServiceSearch()" >
              <div class="row">
                <div class="form-group col-xl-3 col-md-6">
                  <select formControlName="name" class="form-control" >
                      <option value="" disabled>-- Choisir un type de formation --</option>
                      <option value="{{item}}" *ngFor="let item of types">{{item}}</option>
                    </select>
              </div>
                <div class="form-group col-md-6 col-xl-3">
                  <select formControlName="province" class="form-control" >
                    <option value="" disabled>-- Choisir une province --</option>
                    <option value="">-- Listes des provinces --</option>
                    <option value="{{item}}" *ngFor="let item of provinces">{{item}}</option>
                  </select>
                </div>
                <div class="form-group col-md-6 col-xl-3">
                  <select formControlName="commune" (click)="selector()" class="form-control" >
                    <option value="" disabled>-- Choisir une commune --</option>
                    <option value="" disabled>-- Liste des communes --</option>
                    <option value="{{item1}}" *ngFor="let item1 of communes">{{item1}}</option>
                  </select>
                </div>
                
                <div class="top-search col-xl-3 col-md-6"><button type="submit" class="btn btn-default" ><i class="ti-search text-white"></i>&nbsp; Rechercher </button></div>
              </div>
            </form>
          </div>
      </div>
    </div>
    <!-- Header Inner -->
  </header>
<!--/ End Header -->

<!-- Start Shop Blog  -->
<section class="shop-blog section">
  <div class="container">
    <br>&nbsp;
    <div class="row">
      <div class="col-12">
        <div class="section-title">
          <div class="alert alert-info text-center my-2">
            <h3>Resultats obtenus</h3>
          </div>
      </div>
      </div>
    </div>
    <br>&nbsp;
    <div class="row">
      <div class="col-xl-4 col-md-6 col-12" style="overflow-y:scroll; height: 500px;">
        <div class="card-header alert alert-info my-2">
          <h2>Liste des formations retrouver</h2> 
        </div>
        <hr>
        <!-- Start Single Blog  -->
        <div class="shop-single-blog" *ngFor="let coaching of coachings ">
          
          <a (click)="showDetails(coaching)" class="card text-left py-2 px-4">
            <p  class="title">{{coaching?.type}}</p>
            <p  class="title">{{coaching?.title}}</p>
            <span class="currency">{{coaching?.amount+' '+coaching.devise}}</span>
            <p class="date">Debute le : {{coaching?.startDate}}</p>
          </a>
          <hr>
        </div>
        <!-- End Single Blog  -->
      </div>
      <div class=" col-12 col-md-6 col-xl-8"  style="overflow-y:scroll">
        <div class="card-header alert alert-info my-2">
          <h2>Detail de la formation</h2> 
        </div>
        <hr>
        <main  *ngIf="isSelected" style="width: 100%;">
          <div class="row no-gutters">
            <div class="col-sm-5 border-right px-3">
              <article class="gallery-wrap">
                <div class="img-big-wrap">
                  <div> <a href="currentCoaching.logo" data-fancybox=""><img style="width:100%; height:200px" [src]="currentCoaching.logo"></a></div>
                </div> <!-- slider-product.// -->
                
              </article> <!-- gallery-wrap .end// -->
            </div>
            <div class="col-sm-7 px-3">
              <article class="card-body text-left pl-5">
                <!-- short-info-wrap -->
                <h3 class="title mb-3">{{currentCoaching.title}}</h3>
                <h3 class="title mb-3">{{currentCoaching.type}}</h3>
        
                <div class="mb-3">
                  <var class="price h3 text-price">
                    <span class="num"> {{currentCoaching.amount+' '+currentCoaching.devise}}</span>
                  </var>
                  <!--<span>/per kg</span>-->
                </div> <!-- price-detail-wrap .// -->
              </article> <!-- card-body.// -->
            </div> <!-- col.// -->
          </div>
          <div class=" no-gutters"> 
            <div class="col-sm-12">
              <div class="card-body">
                
                <dl>
                  <dt>Description :</dt>
                  <dd><p>{{currentCoaching.description}} </p></dd>
                </dl>
                <dl class="row">
                  <dt class="col-sm-4">Code :</dt>
                  <dd class="col-sm-8">{{currentCoaching?.code}}</dd>
                  <dt class="col-sm-4">Date debut :</dt>
                  <dd class="col-sm-8">{{currentCoaching.startDate}}</dd>
                  <dt class="col-sm-4">Date fin :</dt>
                  <dd class="col-sm-8">{{currentCoaching.dateFinFormation}}</dd>
                  <dt class="col-sm-4">Date limite d'enregistrement :</dt>
                  <dd class="col-sm-8">{{currentCoaching.dateLimiteDenregistrement}}</dd>
                  <dt class="col-sm-4">Frequence de deroulement :</dt>
                  <dd class="col-sm-8">{{currentCoaching.frequency}}</dd>
                  <dt class="col-sm-4">Province :</dt>
                  <dd class="col-sm-8">{{currentCoaching.province}}</dd>
        
                  <dt class="col-sm-4">Commune :</dt>
                  <dd class="col-sm-8">{{currentCoaching.commune}}</dd>
                  <dt class="col-sm-4">Encadreur/Coach/Institution :</dt>
                  <dd class="col-sm-8">{{currentCoaching.builderName}}</dd>
                  <dt class="col-sm-4">Telephone :</dt>
                  <dd class="col-sm-8">{{currentCoaching.user.phone}}</dd>
        
                  <dt class="col-sm-4">Status :</dt>
                  <dd class="col-sm-8 text-success" *ngIf="currentCoaching.status">Disponible</dd>
                  <dd class="col-sm-8 text-warning" *ngIf="!currentCoaching.status">Cloturer</dd>
                </dl>
                <hr>
                <!-- row.// -->
                <p>Reserver votre participation en remplissant le formulaire via le bouton ci-dessous</p>
                <hr>
                <button  class="btn  btn-primary"  (click)="openModalFormulaire(contentAdd,currentCoaching)"> <i class="fa fa-shopping-cart"></i> Reserver</button>
                <br>
                <!-- short-info-wrap .// -->
              </div> <!-- card-body.// -->
            </div> <!-- col.// -->
          </div> <!-- row.// -->
        </main>
      </div>
    </div>
    <hr>
    <div class="card-body my-4">
      <h2>Formations similaires</h2>
    </div>
    <div class="row">
        <!-- Start Single Blog  -->
        <div class="col-xl-3 col-md-6 col-12" *ngFor="let item of searchData">
          <div  class="single-product">
            <div  class="product-img">
              <a (click)="loadSearchedCoachingByLocation(item.province)">
                <span>{{item.province+' ('+item.count+')'}}</span>
              </a>
            </div>
          </div>
        </div>
        <!-- End Single Blog  -->
    </div>
  </div>
</section>
<!-- End Shop Blog  -->
<ng-template #contentAdd let-modal>
  <div class="modal-header" style="background-color:#4051e9;">
    <button type="button" class="close" aria-label="Close" (click)="modal.dismiss('Cross click')">
      <span aria-hidden="true">&times;</span>
    </button>
  </div>
  <div class="modal-body px-5">
    <form [formGroup]="subscribeForm" (submit)="onSaveSubscribe()">
      <h2>Formulaire d'enregistrement pour une formation</h2>

      <div class="form-group">
        <label>Nom</label>
        <input type="text" formControlName="name" class="form-control" placeholder="Votre nom d'utilisateur">
      </div>

      <div class="form-group">
        <label>Email</label>
        <input type="email" formControlName="email" class="form-control" placeholder="Entrer votre adresse email" >
      </div>

      <div class="form-group">
        <label>Numéro téléphone</label>
        <input type="text" formControlName="phone" pattern="[0-9]{8}" class="form-control" placeholder="Entrer votre numero de telephone">
      </div>
      <div class="form-group col-md-6 col-xl-3">
        <select formControlName="province" class="form-control" >
          <option value="" disabled>-- Choisir une province --</option>
          <option value="">-- Listes des provinces --</option>
          <option value="{{item}}" *ngFor="let item of provinces">{{item}}</option>
        </select>
      </div>
      <div class="form-group col-md-6 col-xl-3">
        <select formControlName="commune" (click)="selector()" class="form-control" >
          <option value="" disabled>-- Choisir une commune --</option>
          <option value="" disabled>-- Liste des communes --</option>
          <option value="{{item1}}" *ngFor="let item1 of communes">{{item1}}</option>
        </select>
      </div>
      <br>
      <div class="card-footer">
        <div class="row">
          <div class="col-md-6">
            <button type="button" class="btn btn-secondary" style="width: 100%" (click)="modal.close('Close click')"><i class="fa fa-long-arrow-left"></i>&nbsp;Retour</button>
          </div>
          <div class="col-md-6">
            <button type="submit"  (click)="modal.close('Close click')" class="btn btn-success" style="width: 100%">Enregistrer <i class="fa fa-check"></i></button>
          </div>
        </div>
      </div>
    </form>
  </div>
</ng-template>
<p-confirmDialog header="Confirmation" icon="fa fa-question-circle" width="425"></p-confirmDialog>

<!-- TOAST MESSAGE TEMPLATE -->
<p-toast position="top-right"></p-toast>
<p-toast position="bottom-center" key="c" (onClose)="onReject()" >
  <ng-template let-message pTemplate="message">
    <div class="p-flex p-flex-column" style="flex: 1">
      <div class="p-text-center">
        <i class="pi pi-exclamation-triangle" style="font-size: 3rem"></i>
        <h4>{{message.summary}}</h4>
        <p>{{message.detail}}</p>
      </div>
      <div class="p-grid p-fluid">
        <div class="p-col-6">
          <button type="button" pButton (click)="onConfirm()" label="Yes" class="p-button-success"></button>
        </div>
        <div class="p-col-6">
          <button type="button" pButton (click)="onReject()" label="No" class="p-button-secondary"></button>
        </div>
      </div>
    </div>
  </ng-template>
</p-toast>
<app-footer></app-footer>
